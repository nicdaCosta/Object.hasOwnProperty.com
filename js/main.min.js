(function(window,document,$){"use strict"
var $hasOwnProperty=function(){var e=window.localStorage.getItem("prevSearches")
$hasOwnProperty.history=e?e.split(","):[],$(".results").on("click",".isObject",function(){var e=$(this),a=e.parent("li")
a.toggleClass("expanded")}),$(".historyPanel").on("click","a",function(e){$hasOwnProperty.search(e,$(this).text())}),$("button.search").on("click",$hasOwnProperty.search),$("#Search").on("keypress",function(e){13===e.charCode&&(e.preventDefault(),$hasOwnProperty.search())}),$(document).on("beginSearch",$hasOwnProperty.updateHistory),$(document).on("endSearch",$hasOwnProperty.populateResults),$(document).on("historyUpdated",$hasOwnProperty.populateHistory)}
$hasOwnProperty.search=function(e,$term){$(".hero-unit").hasClass("compressed")||$(".hero-unit").addClass("compressed")
var $searchTerm=$term||$("#Search").val()
if(!$searchTerm){!$(".span3").hasClass("hide")&&$(".span3").fadeOut().addClass("hide"),!$(".span9").hasClass("hide")&&$(".span9").fadeOut().addClass("hide")
var $alert=$(".alert"),$alertText=$alert.find("p")
return $alertText.text("Please enter in a valid search term"),$alert.fadeIn(),!1}$searchTerm=/^\/[\W\w]+/gi.test($searchTerm)?eval($searchTerm):$searchTerm,$(".alert").fadeOut(),$(document).trigger("beginSearch",[$searchTerm]),$(".span3").hasClass("hide")&&$(".span3").fadeIn().removeClass("hide")},$hasOwnProperty.populateResults=function(e,a){var t=$(".results")
t.empty(),t.append(a),t.parent().hasClass("hide")&&t.parent().fadeIn().removeClass("hide")},$hasOwnProperty.updateHistory=function(e,a){var t=$hasOwnProperty.history||[]
5===t.length&&t.shift(),t.push(a),window.localStorage.setItem("prevSearches",t),$(document).trigger("historyUpdated",[t])},$hasOwnProperty.populateHistory=function(){var e=$hasOwnProperty.history.reverse(),a=$(".historyPanel"),t=a.children("li").length
if(t){5===t&&a.children("li:last").remove(),a.find(".active").removeClass("active")
var r=document.createElement("li")
r.className="active"
var s=document.createElement("a")
s.href="#",s.textContent=e[0],r.appendChild(s),a.prepend(r)}else{var n=document.createDocumentFragment()
e.forEach(function(e,a){var t=document.createElement("li")
t.className=0===a?"active":""
var r=document.createElement("a")
r.href="#",r.textContent=e,t.appendChild(r),n.appendChild(t)}),a.empty(),a.append(n)}},$hasOwnProperty()})(window,document,jQuery)
